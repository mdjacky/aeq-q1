Aequilibrium​ ​|​ ​The​ ​Castle​ ​Company:

Please use nodejs (ES6) to run the program.
Example command: node buildCastle.js [1,3,3,3,2]

Note: No space inside the array.

Here I made one assumption: The first and last numbers are not counted as peak or valley. If input only has two element, or something like [1,2,2,2]. No peak or valley is counted.